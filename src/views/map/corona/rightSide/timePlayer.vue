<template>
  <div>
    <el-collapse v-model="activeNames">
      <el-collapse-item id="elCollapse" title="时间选择器" name="1">
        <div id="timeplayer"></div>
      </el-collapse-item>
    </el-collapse>
  </div>
</template>

<script>
import timePlayer from "timeplayer";
import data1 from '@/static/citySum.json';
import pos from '@/static/cityPos.json';

export default {
  name: "timePlayer",
  components: {},
  props: {},
  data() {
    return {
      activeNames: ["1"],
    };
  },
  watch: {},
  computed: {},
  methods: {
    init() {
      const timePlayerDom = document.getElementById("timeplayer");
      const dates = [
        "2020/1/17",
        "2020/1/18",
        "2020/1/19",
        "2020/1/20",
        "2020/1/21",
        "2020/1/22",
        "2020/1/23",
        "2020/1/24",
        "2020/1/25",
        "2020/1/26",
        "2020/1/27",
        "2020/1/28",
        "2020/1/29",
        "2020/1/30",
        "2020/1/31",
        "2020/2/1",
        "2020/2/2",
        "2020/2/3",
        "2020/2/4",
        "2020/2/5",
        "2020/2/6",
        "2020/2/7",
        "2020/2/8",
        "2020/2/9",
        "2020/2/10",
        "2020/2/11",
        "2020/2/12",
        "2020/2/13",
        "2020/2/14",
        "2020/2/15",
        "2020/2/16",
        "2020/2/17",
        "2020/2/18",
        "2020/2/19",
        "2020/2/20",
        "2020/2/21",
        "2020/2/22",
        "2020/2/23",
        "2020/2/24",
        "2020/2/25",
        "2020/2/26",
        "2020/2/27",
        "2020/2/28",
        "2020/2/29",
        "2020/3/1",
        "2020/3/2",
        "2020/3/3",
        "2020/3/4",
        "2020/3/5",
        "2020/3/6",
        "2020/3/7",
        "2020/3/8",
        "2020/3/9",
        "2020/3/10",
        "2020/3/11",
        "2020/3/12",
        "2020/3/13",
        "2020/3/14",
        "2020/3/15",
        "2020/3/16",
        "2020/3/17",
        "2020/3/18",
        "2020/3/19",
        "2020/3/20",
        "2020/3/21",
        "2020/3/22",
        "2020/3/23",
        "2020/3/24",
        "2020/3/25",
        "2020/3/26",
        "2020/3/27",
        "2020/3/28",
        "2020/3/29",
        "2020/3/30",
        "2020/3/31",
        "2020/4/1",
        "2020/4/2",
        "2020/4/3",
        "2020/4/4",
        "2020/4/5",
        "2020/4/6",
        "2020/4/7",
        "2020/4/8",
        "2020/4/9",
        "2020/4/10",
        "2020/4/11",
        "2020/4/12",
        "2020/4/13",
        "2020/4/14",
        "2020/4/15",
        "2020/4/16",
        "2020/4/17",
        "2020/4/18",
        "2020/4/19",
        "2020/4/20",
        "2020/4/21",
        "2020/4/22",
        "2020/4/23",
        "2020/4/24",
        "2020/4/25",
        "2020/4/26",
        "2020/4/27",
        "2020/4/28",
        "2020/4/29",
        "2020/4/30",
        "2020/5/1",
        "2020/5/2",
        "2020/5/3",
        "2020/5/4",
        "2020/5/5",
        "2020/5/6",
        "2020/5/7",
        "2020/5/8",
        "2020/5/9",
        "2020/5/10",
        "2020/5/11",
        "2020/5/12",
        "2020/5/13",
        "2020/5/14",
        "2020/5/15",
        "2020/5/16",
        "2020/5/17",
        "2020/5/18",
        "2020/5/19",
        "2020/5/20",
        "2020/5/21",
        "2020/5/22",
        "2020/5/23",
        "2020/5/24",
        "2020/5/25",
        "2020/5/26",
        "2020/5/27",
        "2020/5/28",
        "2020/5/29",
        "2020/5/30",
        "2020/5/31",
        "2020/6/1",
        "2020/6/2",
        "2020/6/3",
        "2020/6/4",
        "2020/6/5",
        "2020/6/6",
        "2020/6/7",
        "2020/6/8",
        "2020/6/9",
        "2020/6/10",
        "2020/6/11",
        "2020/6/12",
        "2020/6/13",
        "2020/6/14",
        "2020/6/15",
        "2020/6/16",
        "2020/6/17",
        "2020/6/18",
        "2020/6/19",
        "2020/6/20",
        "2020/6/21",
        "2020/6/22",
        "2020/6/23",
        "2020/6/24",
        "2020/6/25",
        "2020/6/26",
        "2020/6/27",
        "2020/6/28",
        "2020/6/29",
        "2020/6/30",
        "2020/7/1",
        "2020/7/2",
        "2020/7/3",
        "2020/7/4",
      ];

      // 初始化
      const tp = new timePlayer(timePlayerDom, {
        dates,
        postSpace: 15,
      });
      tp.on("change", (index, value) => {
        if (typeof value == "undefined") {
          value = "2020/7/4";
        }
        this.$store.commit("updateCorona", {data1:data1,pos:pos,date:value});
      });
      // window.addEventListener('resize',()=>{
      //   // var canvas = document.getElementById('timeplayer')
      //   var canvas = document.getElementsByTagName('canvas')
      //   console.log(canvas[3].style.width=600)
      // })
    },
  },
  created() {
    this.$store.commit("updateCorona", {data1:data1,pos:pos,date:"2020/7/4"})
  },
  mounted() {
    this.init();
  },
};
</script>
<style scoped>
.el-collapse >>> .el-collapse-item__header{
  background-color: rgba(191, 191, 191, 0.31)!important;
  height:30px !important;
}
.el-collapse >>> .el-collapse-item__content {
  padding: 0 !important;
}
#timeplayer {
  /* align-items: center; 垂直居中 */
  /* justify-content: center; */
  /* padding:0 auto; */
  margin: 0 auto;
  width: 100%;
  min-width:320px;
}
</style>